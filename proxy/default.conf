server {
  listen 80;
  server_name localhost;
 
  location / {
    return 301 https://$host$request_uri;
  }
}

server {

    listen 443 ssl;

    ssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;
    ssl_certificate_key /etc/ssl/private/nginx-selfsigned.key ;

    server_name localhost;
 
    location / {
        proxy_pass http://localhost;
    }

    location /v1 {
        try_files $uri $uri/ @express;
    }

    location @express {
        proxy_pass http://express:3000;
    }

    location = /50x.html {
        root /usr/share/nginx/html;
    }

}